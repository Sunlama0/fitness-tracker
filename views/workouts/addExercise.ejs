<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un Exercice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>

<body class="bg-[#F2F2F2] flex flex-col min-h-screen">

    <!-- Navbar -->
    <%- include('../partials/navbar') %>

        <div class="flex-grow flex items-center justify-center p-6">
            <div class="w-full max-w-lg bg-white p-8 rounded-lg shadow-xl text-[#4A4A4A]">
                <h2 class="text-3xl font-bold text-center text-[#E30613] mb-6">
                    Ajouter un Exercice
                </h2>

                <form action="/workouts/<%= sessionId %>/exercises/add" method="POST">
                    <label class="block font-semibold mt-4">Nom de l'exercice</label>
                    <select name="name" id="exerciseSelect" class="w-full border p-3 rounded-lg bg-[#F2F2F2]">
                        <option value="" disabled selected>S√©lectionnez un exercice</option>

                        <!-- üîπ Activit√©s S√©dentaires -->
                        <option value="Dormir" data-met="1.0">Dormir (1.0 MET)</option>
                        <option value="Regarder la t√©l√©vision" data-met="1.0">Regarder la t√©l√©vision (1.0 MET)
                        </option>
                        <option value="Jeux vid√©os assis" data-met="1.0">Jouer √† des jeux vid√©os (1.0 MET)</option>
                        <option value="Lecture assis" data-met="1.0">Lire en position assise (1.0 MET)</option>
                        <option value="Travail de bureau assis" data-met="1.3">Travail de bureau assis (1.3 MET)
                        </option>
                        <option value="Manger assis" data-met="1.5">Manger assis (1.5 MET)</option>

                        <!-- üîπ Activit√©s L√©g√®res -->
                        <option value="P√™che √† la ligne" data-met="1.8">P√™che √† la ligne (1.8 MET)</option>
                        <option value="Faire la vaisselle" data-met="1.8">Faire la vaisselle (1.8 MET)</option>
                        <option value="Activit√© sexuelle (passif)" data-met="1.8">Activit√© sexuelle (passif) (1.8
                            MET)</option>
                        <option value="Jouer de la guitare" data-met="2.0">Jouer de la guitare (2.0 MET)</option>
                        <option value="Cuisiner ou pr√©parer des repas" data-met="2.0">Cuisiner ou pr√©parer des repas
                            (2.0 MET)</option>
                        <option value="Se brosser les dents" data-met="2.0">Se brosser les dents (2.0 MET)</option>
                        <option value="Se doucher" data-met="2.0">Se doucher (2.0 MET)</option>
                        <option value="Marcher lentement, fl√¢ner" data-met="2.0">Marcher lentement, fl√¢ner (2.0 MET)
                        </option>
                        <option value="R√©aliser des √©tirements" data-met="2.3">R√©aliser des √©tirements (2.3 MET)
                        </option>
                        <option value="Yoga" data-met="2.3">Yoga (2.3 MET)</option>
                        <option value="S'occuper d'enfants" data-met="2.5">S'occuper d'enfants (2.5 MET)</option>
                        <option value="Nettoyage g√©n√©ral de la maison" data-met="2.5">Nettoyage g√©n√©ral de la maison
                            (2.5 MET)</option>
                        <option value="Pilates" data-met="2.8">Pilates (2.8 MET)</option>
                        <option value="Danse de salon, lente" data-met="3.0">Danse de salon, lente (3.0 MET)
                        </option>
                        <option value="Promener le chien" data-met="3.0">Promener le chien (3.0 MET)</option>
                        <option value="Voile (nautisme)" data-met="3.0">Voile (nautisme) (3.0 MET)</option>
                        <option value="Surf" data-met="3.0">Surf (3.0 MET)</option>

                        <!-- üîπ Activit√©s Mod√©r√©es -->
                        <option value="√âquitation, au pas" data-met="3.8">√âquitation, au pas (3.8 MET)</option>
                        <option value="S'occuper d'un potager" data-met="3.8">S'occuper d'un potager (3.8 MET)
                        </option>
                        <option value="Tennis de table / ping-pong" data-met="4.0">Tennis de table / ping-pong (4.0
                            MET)</option>
                        <option value="Marcher pour se rendre sur son lieu de travail" data-met="4.0">Marcher pour
                            se rendre sur son lieu de
                            travail (4.0 MET)</option>
                        <option value="V√©lo √† assistance √©lectrique" data-met="4.0">V√©lo √† assistance √©lectrique
                            (4.0 MET)</option>
                        <option value="Volley-ball, match" data-met="4.0">Volley-ball, match (4.0 MET)</option>
                        <option value="Ski alpin et snowboard" data-met="4.3">Ski alpin et snowboard (4.3 MET)
                        </option>
                        <option value="Tondre la pelouse (tondeuse √† moteur)" data-met="4.5">Tondre la pelouse
                            (tondeuse √† moteur) (4.5 MET)
                        </option>
                        <option value="Golf, parcours" data-met="4.8">Golf, parcours (4.8 MET)</option>
                        <option value="Baseball" data-met="5.0">Baseball (5.0 MET)</option>
                        <option value="Snorkeling" data-met="5.0">Snorkeling (5.0 MET)</option>
                        <option value="Kayak (promenade)" data-met="5.0">Kayak (promenade) (5.0 MET)</option>
                        <option value="Plong√©e bouteille" data-met="5.3">Plong√©e bouteille (5.3 MET)</option>
                        <option value="Randonn√©e √† travers champs et versants de collines" data-met="5.3">Randonn√©e
                            √† travers champs et
                            versants de collines (5.3 MET)</option>
                        <option value="Randonn√©e en raquettes √† neige, effort mod√©r√©" data-met="5.3">Randonn√©e en
                            raquettes √† neige, effort
                            mod√©r√© (5.3 MET)</option>
                        <option value="Badminton, match" data-met="5.5">Badminton, match (5.5 MET)</option>
                        <option value="Escalade, difficult√© mod√©r√©e" data-met="5.8">Escalade, difficult√© mod√©r√©e
                            (5.8 MET)</option>
                        <option value="Activit√© sexuelle, partenaire actif" data-met="5.8">Activit√© sexuelle,
                            partenaire actif (5.8 MET)
                        </option>
                        <option value="Entra√Ænement en r√©sistance (halt√©rophilie, musculation, street workout, etc...)"
                            data-met="6.0">
                            Entra√Ænement en r√©sistance (halt√©rophilie, musculation, street workout, etc...) (6.0
                            MET)</option>
                        <option value="V√©lo elliptique" data-met="6">V√©lo elliptique (6.0 MET)</option>

                        <!-- üîπ Activit√©s Intenses -->
                        <option value="Zumba" data-met="6.5">Zumba (6.5 MET)</option>
                        <option value="Stand up paddle" data-met="6.5">Stand up paddle (6.5 MET)</option>
                        <option value="Promenade √† v√©lo √† son rythme" data-met="6.8">Promenade √† v√©lo √† son rythme
                            (6.8 MET)</option>
                        <option value="Tennis, match" data-met="6.8">Tennis, match (6.8 MET)</option>
                        <option value="Patinage sur glace" data-met="7.0">Patinage sur glace (7.0 MET)</option>
                        <option value="V√©lo d'appartement" data-met="7.0">V√©lo d'appartement (7.0 MET)</option>
                        <option value="Football, match" data-met="7.0">Football, match (7.0 MET)</option>
                        <option value="Course √† pied d'endurance, type jogging" data-met="7.0">Course √† pied
                            d'endurance, type jogging (7.0
                            MET)</option>
                        <option value="Basket-ball, match" data-met="7.5">Basket-ball, match (7.5 MET)</option>
                        <option value="Roller en ligne, loisir" data-met="7.5">Roller en ligne, loisir (7.5 MET)
                        </option>
                        <option value="Danse g√©n√©rale, rapide" data-met="7.8">Danse g√©n√©rale, rapide (7.8 MET)
                        </option>
                        <option value="Randonn√©e technique avec sac √† dos" data-met="7.8">Randonn√©e technique avec
                            sac √† dos (7.8 MET)
                        </option>
                        <option value="Monter des escaliers" data-met="8.0">Monter des escaliers (8.0 MET)</option>
                        <option value="Hockey sur glace" data-met="8.0">Hockey sur glace (8.0 MET)</option>
                        <option value="Natation synchronis√©e" data-met="8.0">Natation synchronis√©e (8.0 MET)
                        </option>
                        <option value="Rugby, match" data-met="8.3">Rugby, match (8.3 MET)</option>
                        <option value="Natation, crawl" data-met="8.3">Natation, crawl (8.3 MET)</option>
                        <option value="VTT" data-met="8.5">VTT (8.5 MET)</option>

                        <!-- üîπ Activit√©s Tr√®s Intenses -->
                        <option value="Course √† pied de type cross country" data-met="9.3">Course √† pied de type
                            cross country (9.3 MET)</option>
                        <option value="Water-polo, match" data-met="10.0">Water-polo, match (10.0 MET)</option>
                        <option value="Cyclisme de loisir, 22,5 km/h √† 25,6 km/h, effort vigoureux" data-met="10.0">
                            Cyclisme de loisir, 22,5 km/h √† 25,6 km/h, effort vigoureux (10.0 MET)</option>
                        <option value="Arts martiaux, en combat" data-met="10.3">Arts martiaux, en combat (10.3 MET)
                        </option>
                        <option value="Natation, brasse" data-met="10.3">Natation, brasse (10.3 MET)</option>
                        <option value="Entra√Ænement fractionn√© de haute intensit√©" data-met="11.0">Entra√Ænement
                            fractionn√© de haute intensit√©, Tabata, burpees, squats saut√©s, mountain climbers (11.0
                            MET)</option>
                        <option value="Plong√©e libre (plong√©e en apn√©e)" data-met="11.8">Plong√©e libre (plong√©e en
                            apn√©e) (11.8 MET)</option>
                        <option value="Handball, match" data-met="12.0">Handball, match (12.0 MET)</option>
                        <option value="Boxe, combat sur ring" data-met="12.3">Boxe, combat sur ring (12.3 MET)
                        </option>
                        <option value="Corde √† sauter" data-met="12.3">Corde √† sauter (12.3 MET)</option>
                        <option value="Course √† pied de type marathon" data-met="13.3">Course √† pied de type
                            marathon (13.3 MET)</option>
                        <option value="Natation, papillon" data-met="13.8">Natation, papillon (13.8 MET)</option>
                        <option value="Cyclisme √† plus de 32 km/h" data-met="16.8">Cyclisme √† plus de 32 km/h (16.8
                            MET)</option>
                        <option value="Course √† pied de type sprint, >22,5 km/h" data-met="23.0">Course √† pied de
                            type sprint, >22,5 km/h (23.0 MET)</option>

                        <!-- üîπ Autre -->
                        <option value="Autre" data-met="">Autre (Saisir MET)</option>
                    </select>

                    <!-- Champ cach√© pour le MET s√©lectionn√© -->
                    <input type="hidden" name="met" id="metInput">

                    <!-- Champ Titre pour exercices personnalis√©s -->
                    <label class="block font-semibold mt-4 hidden" id="customNameLabel">Nom de l'exercice</label>
                    <input type="text" name="customName" id="customNameInput"
                        class="w-full border p-3 rounded-lg bg-[#F2F2F2] hidden" placeholder="Ex: Parkour, Pogo Stick">


                    <!-- Champ MET pour exercices personnalis√©s -->
                    <label class="block font-semibold mt-4 hidden" id="customMetLabel">MET personnalis√©</label>
                    <input type="number" name="customMet" id="customMetInput"
                        class="w-full border p-3 rounded-lg bg-[#F2F2F2] hidden" placeholder="Ex: 8.5">

                    <label class="block font-semibold mt-4 mb-4">Dur√©e (minutes)</label>
                    <input type="number" name="duration" placeholder="Dur√©e en minutes"
                        class="w-full border p-3 rounded-lg bg-[#F2F2F2]" required min="1" />

                    <button type="submit"
                        class="w-full bg-[#E30613] hover:bg-[#C20510] text-white font-bold py-3 rounded-lg transition duration-300 mt-4">
                        Ajouter l'exercice
                    </button>
                </form>

                <p class="text-center text-[#4A4A4A] mt-4">
                    <a href="/workouts" class="text-[#E30613] hover:underline">Retour</a>
                </p>
            </div>
        </div>

        <!-- Footer -->
        <%- include('../partials/footer') %>

            <script>
                function logFormData(event) {

                    let selectedExercise = document.getElementById("exerciseSelect");
                    let selectedOption = selectedExercise.options[selectedExercise.selectedIndex];
                    let metValue = selectedOption.dataset.met || document.getElementById("customMetInput").value;
                    let durationValue = document.getElementById("durationInput").value;

                    // Mettre √† jour le champ cach√© du MET
                    document.getElementById("metInput").value = metValue;

                    // Ensuite, soumettre le formulaire
                    event.target.submit();
                }

                document.getElementById("exerciseSelect").addEventListener("change", function () {
                    let selectedOption = this.options[this.selectedIndex];
                    let metValue = selectedOption.dataset.met;
                    let customMetInput = document.getElementById("customMetInput");
                    let customMetLabel = document.getElementById("customMetLabel");
                    let metInput = document.getElementById("metInput");

                    let customNameInput = document.getElementById("customNameInput");
                    let customNameLabel = document.getElementById("customNameLabel");

                    if (selectedOption.value === "Autre") {
                        customMetInput.classList.remove("hidden");
                        customMetLabel.classList.remove("hidden");
                        customMetInput.required = true;

                        customNameInput.classList.remove("hidden");
                        customNameLabel.classList.remove("hidden");
                        customNameInput.required = true;

                        metInput.value = ''; // Effacer MET pour √©viter une erreur
                    } else {
                        customMetInput.classList.add("hidden");
                        customMetLabel.classList.add("hidden");
                        customMetInput.required = false;

                        customNameInput.classList.add("hidden");
                        customNameLabel.classList.add("hidden");
                        customNameInput.required = false;

                        metInput.value = metValue; // Mettre √† jour le champ MET cach√©
                    }
                });
            </script>

</body>

</html>